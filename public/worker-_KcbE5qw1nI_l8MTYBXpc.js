self.addEventListener("push",t=>{if(!t.data)return;let i;try{i=t.data.json()}catch(n){i={title:"Budo League",body:t.data.text()}}const n={body:i.body,icon:i.icon||"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",tag:i.tag||"budo-league",renotify:!0,data:i.data||{}};t.waitUntil(self.registration.showNotification(i.title,n))}),self.addEventListener("notificationclick",t=>{var i;t.notification.close();const n=(null===(i=t.notification.data)||void 0===i?void 0:i.link)||"/dashboard";t.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(t=>{for(const i of t)if(i.url.includes(self.location.origin)&&"focus"in i)return i.navigate(n),i.focus();return self.clients.openWindow(n)}))});